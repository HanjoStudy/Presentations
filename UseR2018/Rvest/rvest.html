<!DOCTYPE html>
<html>
<head>
  <title>Scraping static websites with rvest</title>
  <meta charset="utf-8">
  <meta name="description" content="Scraping static websites with rvest">
  <meta name="author" content="Hanjo Odendaal">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="libraries/widgets/quiz/css/demo.css"></link>
<link rel=stylesheet href="libraries/widgets/bootstrap/css/bootstrap.css"></link>
<link rel=stylesheet href="libraries/widgets/interactive/css/aceeditor.css"></link>
<link rel=stylesheet href="libraries/widgets/nvd3/css/nv.d3.css"></link>
<link rel=stylesheet href="libraries/widgets/nvd3/css/rNVD3.css"></link>
<link rel=stylesheet href="libraries/widgets/leaflet/external/leaflet.css"></link>
<link rel=stylesheet href="libraries/widgets/leaflet/external/leaflet-rCharts.css"></link>
<link rel=stylesheet href="libraries/widgets/leaflet/external/legend.css"></link>
<link rel=stylesheet href="./assets/css/ribbons.css"></link>
<link rel=stylesheet href="./assets/css/style.css"></link>
<link rel=stylesheet href="./assets/css/title_slide_bg_ex.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  <script src="libraries/widgets/nvd3/js/jquery-1.8.2.min.js"></script>
<script src="libraries/widgets/nvd3/js/d3.v3.min.js"></script>
<script src="libraries/widgets/nvd3/js/nv.d3.min-new.js"></script>
<script src="libraries/widgets/nvd3/js/fisheye.js"></script>
<script src="libraries/widgets/leaflet/external/leaflet.js"></script>
<script src="libraries/widgets/leaflet/external/leaflet-providers.js"></script>
<script src="libraries/widgets/leaflet/external/Control.FullScreen.js"></script>


</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
      <slide class="nobackground">
    <article class="flexbox vcenter">
      <span>
        <img width='300px' src="assets/img/logo.png">
      </span>
    </article>
  </slide>
    <slide class="title-slide segue nobackground">
  <aside class="gdbar">
    <img src="assets/img/logo.png">
  </aside>
  <hgroup class="auto-fadein">
    <h1>Scraping static websites with rvest</h1>
    <h2>Exploring Rvest</h2>
    <p>Hanjo Odendaal<br/></p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
    <slide class="" id="slide-1" style="background:; background-size:;">
  <hgroup>
    
  </hgroup>
  <article>
    <style type="text/css">
body {background:grey transparent;
}
</style>

<style>
div.footnotes_link {
  position: absolute;
  bottom: 0;
  margin-bottom: 10px;
  width: 80%;
  font-size: 0.6em;
}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<script>
$(document).ready(function() {
  $('slide:not(.backdrop):not(.title-slide)').append('<div class=\"footnotes_link\">');

  $('footnote').each(function(index) {
    var text  = $(this).html();
    var fnNum = (index+1).toString();
    $(this).html(fnNum.sup());

    var footnote   = fnNum + '. ' + text + '<br/>';
    var oldContent = $(this).parents('slide').children('div.footnotes_link').html();
    var newContent = oldContent + footnote;
    $(this).parents('slide').children('div.footnotes_link').html(newContent);
  });
});
</script>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Links to slides</h2>
  </hgroup>
  <article>
    <p>Rvest:
<a href="https://bit.ly/2KYQZDA">https://bit.ly/2KYQZDA</a></p>

<p>Rselenium:
<a href="https://bit.ly/2KWd6dW">https://bit.ly/2KWd6dW</a></p>

<p>Code Repo in Gist:
<a href="https://bit.ly/2NA3Spg">https://bit.ly/2NA3Spg</a></p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="segue" id="slide-3" style="background:; background-size:;">
  <hgroup>
    <h2>First things first: What will we be doing today</h2>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Topics and outcomes</h2>
  </hgroup>
  <article>
    <p><strong>Session 1:</strong></p>

<ul>
<li>Ethics

<ul>
<li>Know where you draw the line</li>
</ul></li>
<li><code>robottxt</code>

<ul>
<li>How we can use them to identify accessible sites</li>
</ul></li>
<li><p>Rvest</p>

<ul>
<li>Learning the basics</li>
</ul></li>
<li><p>Getting <code>RSelenium</code> connected with <code>docker</code></p>

<ul>
<li>Lets get the engine started!!</li>
</ul></li>
</ul>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Topics and outcomes</h2>
  </hgroup>
  <article>
    <p><strong>Session 2:</strong></p>

<ul>
<li>RSelenium basic functionality

<ul>
<li>Driving your browser from <code>R</code></li>
<li>Useful functions in pipeline</li>
</ul></li>
<li> Getting to know Australian wines a bit better</li>
</ul>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="" id="slide-6">
<hgroup>
  <h2>Ethics</h2>
</hgroup>
<article class = 'flexbox vcenter'>
<p>With great power comes great responsibility</p>

</article>
<!-- Presenter Notes -->
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>The FAQ of Scraping</h2>
  </hgroup>
  <article>
    <p>There is a big distinction here, we have to seperate <em>ethics</em> vs <em>law</em><footnote>I am <strong>not</strong> an <em>expert</em>, I just researched and read a couple of blogs. Sample size <em>n</em> = 3</footnote></p>

<ul class = "build incremental">
<li><p>Is scraping illegal?</p>

<ul class = "build incremental">
<li><em>Well... yes and no. At the moment the law is still undefined and has to catch up a lot to define online data collection. But, that being said, malicious attempts to halt a service of a website is a DDOS attack and is illegal</em></li>
</ul></li>
<li><p>What can I do to ensure I dont I dont expose myself or the company in a &#39;legal/ethical&#39; scraping project?</p>

<ul class = "build incremental">
<li><em>Personal data is a big no no. IF you are collecting data from a website which contains personal information. Make sure you are not collecting/saving any of it. Transform and ensure complete anonymization of data points</em></li>
</ul></li>
</ul>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>The rules of the game</h2>
  </hgroup>
  <article>
    <h3>10 Commandments of the data scraper <footnote>Find the orignal <a href="https://towardsdatascience.com/ethics-in-web-scraping-b96b18136f01">here</a></footnote></h3>

<ul class = "build incremental">
<li><p><strong>I Shall Go Through Appropriate Channels if Available:</strong> If the website has a public API that provides the data, use it and avoid scraping all together</p></li>
<li><p><strong>Consider The Poor Sysadmin:</strong> Provide a User Agent string that makes intentions clear and provides a way for sysadmins to contact you with questions or concerns</p></li>
<li><p><strong>I Am not A Robot:</strong> Request data at a reasonable rate (~<strong>5sec</strong> wait). Don&#39;t ever be confused for a DDoS attack. Play nice with others</p></li>
<li><p><strong>I shall not become addicted to data:</strong> Collecting data without a cause is very Big Brother. Only take what you need</p></li>
</ul>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>10 Commandments of the Data Scraper (Cont.)</h2>
  </hgroup>
  <article>
    <ul class = "build incremental">
<li><p><strong>I Shall Not Plageriase:</strong> If the website has a public API that provides the data, use it and avoid scraping all together</p></li>
<li><p><strong>Not Just Interesting:</strong> Create new value from the data</p></li>
<li><p><strong>Realise People Are People:</strong> Why scrape when you can just contact the holder who might SFTP it to you?</p></li>
<li><p><strong>You Are Responsible, Not Your Boss:</strong> You are the expert, guide your line managers and highlight when you are uncomfortable</p></li>
</ul>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="segue" id="slide-10" style="background:url(https://media.giphy.com/media/Ps89uHS7n72j6/giphy.gif);background-size:cover; background-size:;">
  <hgroup>
    <h2>robotstxt</h2>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Informal arrangements</h2>
  </hgroup>
  <article>
    <p>Web site owners use the /robots.txt file to give instructions about their site to web robots; this is called The Robots Exclusion Protocol.</p>

<ul>
<li>Robots.txt is still a very informal &quot;institution&quot;, and there is no authoritative list of robots. Rvest wraps around the curl and httr packages-libraries, and neither has a robot name, beyond the one you could give them</li>
</ul>

<pre><code class="r">User-agent: *
Disallow: /cgi-bin/
Disallow: /tmp/
Disallow: /~joe/
</code></pre>

<pre><code class="r">User-agent: Google
Disallow:

User-agent: *
Disallow: /
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Using Robotstxt</h2>
  </hgroup>
  <article>
    <pre><code class="r">if(!require(robotstxt)) install.packages(&quot;robotstxt&quot;)
library(robotstxt)
</code></pre>

<pre><code class="r">rtxt &lt;- robotstxt(domain = &quot;www.fbi.gov&quot;)
rtxt$comments %&gt;% tbl_df
</code></pre>

<pre><code>## # A tibble: 8 x 2
##    line comment                                                           
##   &lt;int&gt; &lt;chr&gt;                                                             
## 1     3 # Define access-restrictions for robots/spiders                   
## 2     4 # http://www.robotstxt.org/wc/norobots.html                       
## 3     8 # By default we allow robots to access all areas of our site      
## 4     9 # already accessible to anonymous users                           
## 5    16 # Add Googlebot-specific syntax extension to exclude forms        
## 6    17 # that are repeated for each piece of content in the site         
## 7    18 # the wildcard is only supported by Googlebot                     
## 8    19 # http://www.google.com/support/webmasters/bin/answer.py?answer=4~
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>What part of the site may I visit?</h2>
  </hgroup>
  <article>
    <p>FBI <em>literally</em> gives is almost free rein on their website!</p>

<pre><code class="r">rtxt$permissions
</code></pre>

<pre><code>##       field useragent                         value
## 1  Disallow         *                              
## 2  Disallow         *                    /@@search?
## 3  Disallow         *                      /search?
## 4  Disallow         *            /*atct_album_view$
## 5  Disallow         *           /*folder_factories$
## 6  Disallow         *        /*folder_summary_view$
## 7  Disallow         *                 /*login_form$
## 8  Disallow         *         /*mail_password_form$
## 9  Disallow         *                 /*search_rss$
## 10 Disallow         *                /*sendto_form$
## 11 Disallow         *               /*summary_view$
## 12 Disallow         *             /*thumbnail_view$
## 13 Disallow         *                 /plonejsi18n$
## 14 Disallow         * /*@@castle.cms.querylisting*?
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>What part of the site may I visit?</h2>
  </hgroup>
  <article>
    <p>If you know exactly what you want to lookup, you can do a specific check on that url</p>

<pre><code class="r">paths_allowed(&quot;https://www.rba.gov.au/speeches&quot;)
</code></pre>

<pre><code>## [1] TRUE
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Path lookup in batch</h2>
  </hgroup>
  <article>
    <pre><code class="r">paths_allowed(
  paths  = c(&quot;/publications&quot;,&quot;/speeches&quot;), 
  domain = c(&quot;https://www.rba.gov.au&quot;),
  bot    = &quot;*&quot;
)
</code></pre>

<pre><code>## [1] TRUE TRUE
</code></pre>

<p>Lets have a final look at the <a href="https://en.wikipedia.org/robots.txt">wikipedia</a> <code>robottxt</code> file</p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Crawl-delay</h2>
  </hgroup>
  <article>
    <p>Remember as part of the commandments we must ensure our scraper behaves well and not try an access all files all at once? The <code>crawl_delay</code> feature comes into play here:</p>

<pre><code class="r">rtxt$crawl_delay
</code></pre>

<pre><code>## [1] field     useragent value    
## &lt;0 rows&gt; (or 0-length row.names)
</code></pre>

<p>But what if the <code>robottxt</code> file we downloaded did not contain any information?</p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Then sleep for around 5 - 10 seconds between calls</h2>
  </hgroup>
  <article>
    <p><img src="assets/img/crawl_delay.png" title="plot of chunk unnamed-chunk-10" alt="plot of chunk unnamed-chunk-10" width="100%" style="display: block; margin: auto;" /></p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>What do I mean by sleeping between calls?</h2>
  </hgroup>
  <article>
    <p>We need to tell <code>R</code> to not go absolutely beserek and try and get all the pages we want to investigate at once, we do this using the <code>Sys.sleep</code> command</p>

<pre><code class="r">nytnyt &lt;- function (periods = c(1,1.5)){
  tictoc &lt;- runif(1, periods[1], periods[2])
  cat(paste0(Sys.time()), &quot;- Sleeping for &quot;, round(tictoc, 2), &quot;seconds\n&quot;)
  Sys.sleep(tictoc)
}
nytnyt()
</code></pre>

<pre><code>## 2018-07-06 21:21:35 - Sleeping for  1.02 seconds
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="segue" id="slide-19" style="background:url(https://media.giphy.com/media/ohONS2y8GTDoI/giphy.gif);background-size:cover; background-size:;">
  <hgroup>
    <h2>rvest</h2>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Installing rvest</h2>
  </hgroup>
  <article>
    <p>Easy har-<em>vest</em>-ing of static websites. Welcome to rvest</p>

<pre><code class="r">if(!require(rvest)) install.packages(&quot;rvest&quot;)
library(rvest)
</code></pre>

<p>If you have used <code>XML</code> before, <code>rvest</code> is a dish of the same flavour</p>

<pre><code class="r">get_ip &lt;- function(){
  read_html(&quot;https://api.ipify.org?format=json&quot;) %&gt;% 
    html_text() %&gt;% 
    jsonlite::fromJSON()
}
get_ip()
</code></pre>

<pre><code>## $ip
## [1] &quot;41.2.35.15&quot;
</code></pre>

<p>Now to extend on this example</p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>DOM who? Learning the jargon</h2>
  </hgroup>
  <article>
    <pre><code class="r">ask &lt;- read_html(&quot;http://ask.com&quot;)
ask %&gt;% html_nodes(&quot;div&quot;)
</code></pre>

<pre><code>## {xml_nodeset (15)}
##  [1] &lt;div class=&quot;l-header&quot;&gt;\n    &lt;div class=&quot;l-header-container&quot;&gt;\n      ...
##  [2] &lt;div class=&quot;l-header-container&quot;&gt;\n        \n\n\n&lt;/div&gt;
##  [3] &lt;div class=&quot;main&quot;&gt;\n    &lt;div class=&quot;l-mid-content content-visible&quot;&gt; ...
##  [4] &lt;div class=&quot;l-mid-content content-visible&quot;&gt;\n        &lt;div class=&quot;l- ...
##  [5] &lt;div class=&quot;l-mid-container&quot;&gt;\n            \n\n\n\n&lt;script&gt;\n       ...
##  [6] &lt;div class=&quot;wrap-sides&quot;&gt;\n    &lt;div class=&quot;PartialHome-wrapper&quot; data ...
##  [7] &lt;div class=&quot;PartialHome-wrapper&quot; data-zen=&quot;true&quot;&gt;\n        \n&lt;div c ...
##  [8] &lt;div class=&quot;PartialHome-wrapper-logo&quot;&gt;&lt;/div&gt;
##  [9] &lt;div class=&quot;search-bar&quot;&gt;\n            &lt;form accept-charset=&quot;UTF-8&quot;  ...
## [10] &lt;div class=&quot;PartialHome-clear search-clear js-PartialHome-clear&quot;&gt;&lt;/ ...
## [11] &lt;div class=&quot;l-right-content content-visible&quot;&gt;\n\n&lt;/div&gt;
## [12] &lt;div class=&quot;l-footer content-visible&quot;&gt;\n    &lt;div class=&quot;l-footer-co ...
## [13] &lt;div class=&quot;l-footer-container&quot;&gt;\n        \n\n    \n\n&lt;div class=&quot;P ...
## [14] &lt;div class=&quot;PartialFooter-body&quot;&gt;\n    &lt;ul class=&quot;PartialFooter-list ...
## [15] &lt;div id=&quot;shadow&quot; style=&quot;height: 100%; display: none;&quot;&gt;&lt;/div&gt;
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="" id="slide-22" style="background:; background-size:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p>What is the Document Object Model</p>

<div style='float:left;width:48%;' class='centered'>
  <ul>
<li>The Document Object Model (DOM) is a programming interface (API) for HTML and XML documents.</li>
<li>DOM represents the document as <strong>nodes</strong> and <strong>objects</strong>. Its the way programming languages connect to the page</li>
<li>DOM is an object-oriented representation of the web page, which can be modified or accessed<footnote>Useful <a href="https://javascript.info/dom-nodes">link</a></footnote></li>
</ul>

</div>
<div style='float:right;width:48%;'>
  <p><img src="assets/img/peter_html.png" title="plot of chunk unnamed-chunk-15" alt="plot of chunk unnamed-chunk-15" width="100%" style="display: block; margin: auto;" /></p>

</div>  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_table()</h2>
  </hgroup>
  <article>
    <p><code>html_table()</code> is an easy to use wrapper that identifies the nodes of class <code>&lt;td&gt;&lt;/td&gt;</code> and <code>&lt;th&gt;&lt;/th&gt;</code>. </p>

<p>Lucky for us, we don&#39;t need to know what is happening in the background! I am going to explore the rugby world Cup information from wikipedia</p>

<pre><code class="r">rugby &lt;- read_html(&quot;https://en.wikipedia.org/wiki/Rugby_World_Cup&quot;)
rugby_tables &lt;- rugby %&gt;% html_table(., fill = T)
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_table()</h2>
  </hgroup>
  <article>
    <p>Lucky for us, we don&#39;t need to know what is happening in the background! I am going to explore the rugby world Cup information from wikipedia</p>

<pre><code class="r">rugby &lt;- read_html(&quot;https://en.wikipedia.org/wiki/Rugby_World_Cup&quot;)
rugby_tables &lt;- rugby %&gt;% html_table(., fill = T)
</code></pre>

<pre><code class="r">library(scales)
rugby_tables %&gt;% 
  .[[3]] %&gt;% 
  mutate(attendance = as.numeric(gsub(&quot;[^0-9.-]+&quot;, &quot;&quot;, `Total attendance`))) %&gt;%
  ggplot(., aes(Year, attendance, fill = attendance)) + 
  geom_bar(stat = &quot;Identity&quot;) + 
  labs(title = &quot;World Cup Rugby Attendance&quot;, 
       subtitle = &quot;1987 - 2015&quot;) +
  scale_y_continuous(label = comma) + 
  theme_light()
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><img src="assets/fig/unnamed-chunk-19-1.png" title="plot of chunk unnamed-chunk-19" alt="plot of chunk unnamed-chunk-19" style="display: block; margin: auto;" /></p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_nodes()</h2>
  </hgroup>
  <article>
    <p>Ok, lets see how we can use the nodes to extract data</p>

<ul>
<li>Using the selector gadget, we can identify nodes within the DOM, that we would like to focus on</li>
<li>There are 2 methods by which you can isolate a node: CSS and xpath</li>
</ul>

<pre><code class="r">rugby %&gt;% 
  html_nodes(., xpath = &#39;//*[(@id = &quot;toc&quot;)]&#39;) %&gt;% 
  html_text %&gt;% 
  cat

rugby %&gt;% 
  html_nodes(., &#39;div#toc.toc&#39;) %&gt;% 
  html_text %&gt;% 
  cat
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Concluding rvest</h2>
  </hgroup>
  <article>
    <p>Rvest is an amazing package for static website scraping and session control. For 90% of the websites out there, rvest will enable you to collect information in a well organised manner. For the other 10% you will need Selenium. </p>

<p>I have added extra examples features of <code>rvest</code> that we will not get to today.</p>

<p>So onwards to Selenium!!</p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="segue" id="slide-28" style="background:; background-size:;">
  <hgroup>
    <h1>Added Extras</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_session()</h2>
  </hgroup>
  <article>
    <p>Once you have basic static website scraping down, you need to start learning about sessions. What does this mean?</p>

<ul>
<li>cookies</li>
<li>header requests</li>
<li>status codes</li>
</ul>

<p>In essence you will be simulating browser activity. Do note, its different from a browser in that it cannot render javascript, but it can simulate moving through static webpages </p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_session()</h2>
  </hgroup>
  <article>
    <p>So what does a session object contain?</p>

<pre><code class="r">rugby &lt;- read_html(&quot;https://en.wikipedia.org/wiki/Rugby_World_Cup&quot;)
rugby
</code></pre>

<pre><code>## {xml_document}
## &lt;html class=&quot;client-nojs&quot; lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;
## [1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset= ...
## [2] &lt;body class=&quot;mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-sub ...
</code></pre>

<pre><code class="r">rugby &lt;- html_session(&quot;https://en.wikipedia.org/wiki/Rugby_World_Cup&quot;)
rugby
</code></pre>

<pre><code>## &lt;session&gt; https://en.wikipedia.org/wiki/Rugby_World_Cup
##   Status: 200
##   Type:   text/html; charset=UTF-8
##   Size:   272530
</code></pre>

<p>This becomes useful when you are interacting with websites; lets take a look at forms</p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><img src="assets/img/WC.png" title="plot of chunk unnamed-chunk-22" alt="plot of chunk unnamed-chunk-22" width="100%" style="display: block; margin: auto;" /></p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><img src="assets/img/form.png" title="plot of chunk unnamed-chunk-23" alt="plot of chunk unnamed-chunk-23" width="100%" style="display: block; margin: auto;" /></p>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_form()</h2>
  </hgroup>
  <article>
    <p>So to interact with forms, we are going to use <code>html_session</code> and <code>html_form</code></p>

<pre><code class="r">rugby &lt;- html_session(&quot;https://en.wikipedia.org/wiki/Rugby_World_Cup&quot;)
rugby_form &lt;- rugby %&gt;% html_form()
rugby_form
</code></pre>

<pre><code>## [[1]]
## &lt;form&gt; &#39;searchform&#39; (GET /w/index.php)
##   &lt;input search&gt; &#39;search&#39;: 
##   &lt;input hidden&gt; &#39;title&#39;: Special:Search
##   &lt;input submit&gt; &#39;fulltext&#39;: Search
##   &lt;input submit&gt; &#39;go&#39;: Go
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_form()</h2>
  </hgroup>
  <article>
    <p>Next, we can actually fill in the form using <code>set_values</code></p>

<pre><code class="r">rugby_form[[1]]$fields$search$value
</code></pre>

<pre><code>## NULL
</code></pre>

<pre><code class="r">rugby_form &lt;- set_values(rugby_form[[1]], search = &quot;cricket&quot;)
rugby_form
</code></pre>

<pre><code>## &lt;form&gt; &#39;searchform&#39; (GET /w/index.php)
##   &lt;input search&gt; &#39;search&#39;: cricket
##   &lt;input hidden&gt; &#39;title&#39;: Special:Search
##   &lt;input submit&gt; &#39;fulltext&#39;: Search
##   &lt;input submit&gt; &#39;go&#39;: Go
</code></pre>

<pre><code class="r">cricket &lt;- submit_form(rugby, rugby_form)
</code></pre>

<pre><code>## Submitting with &#39;fulltext&#39;
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>html_form()</h2>
  </hgroup>
  <article>
    <pre><code class="r">cricket %&gt;% 
  html_nodes(&quot;a&quot;) %&gt;% 
  html_attr(&quot;href&quot;) %&gt;% 
  .[10:15]
</code></pre>

<pre><code>## [1] &quot;/wiki/Cricket&quot;                                        
## [2] &quot;/wiki/India_national_cricket_team&quot;                    
## [3] &quot;/wiki/History_of_cricket&quot;                             
## [4] &quot;/wiki/One_Day_International&quot;                          
## [5] &quot;/wiki/List_of_countries_received_ODI_status_(cricket)&quot;
## [6] &quot;/wiki/2019_Cricket_World_Cup&quot;
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="segue" id="slide-36" style="background:; background-size:;">
  <hgroup>
    <h1>Case Study: Investing drugs test</h1>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Breaking down the URL</h2>
  </hgroup>
  <article>
    <p><a href="https://www.ecstasydata.org/index.php?sort=DatePublishedU+desc&amp;start=0&amp;search_field=-&amp;m1=-1&amp;m2=-1&amp;datefield=tested&amp;max=200&amp;field_test=1">https://www.ecstasydata.org/index.php?sort=DatePublishedU+desc&amp;start=0&amp;search_field=-&amp;m1=-1&amp;m2=-1&amp;datefield=tested&amp;max=200&amp;field_test=1</a></p>

<ul class = "build incremental">
<li>&#39;?&#39; - breaks the up the API and parameters follow</li>
<li>&#39;&amp;&#39; - breaks up parameters</li>
<li>&#39;start=&#39; - this will be the incremental control of the pages</li>
<li>&#39;max=&#39; - amount of observations returned</li>
</ul>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Lets get started</h2>
  </hgroup>
  <article>
    <p>Read the webpage into R</p>

<pre><code class="r">pg &lt;- read_html(&quot;https://www.ecstasydata.org/index.php?sort=DatePublishedU+desc&amp;start=0&amp;max=200&quot;)

pg
</code></pre>

<pre><code>## {xml_document}
## &lt;html&gt;
## [1] &lt;head&gt;\n&lt;title&gt;EcstasyData.org: Lab Test Results for Ecstasy/Molly a ...
## [2] &lt;body id=&quot;Home&quot; class=&quot;TestResults&quot;&gt;\n&lt;div id=&quot;pre-content-top&quot; styl ...
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="segue" id="slide-39" style="background:url(assets/img/site_html.png);background-size:cover; background-size:;">
  <hgroup>
    
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Extract table</h2>
  </hgroup>
  <article>
    <p>We will use <code>rvest::html_table</code> to extract table</p>

<pre><code class="r">pg_table &lt;- pg %&gt;% 
  html_table(fill = T) %&gt;% 
  .[[2]]

names(pg_table) %&gt;% head
</code></pre>

<pre><code>## [1] &quot;Sample Photo&quot;                                                                                                                                                                                      
## [2] &quot;Sample NameSample Name is the street name that was submitted with the sample (or the common street-name for a table imprint or sample). The individual result view page provides more information.&quot;
## [3] &quot;Active ContentsActive Contentsis a list of substances detected by the lab.&quot;                                                                                                                        
## [4] &quot;Active ContentsActive Contentsis a list of substances detected by the lab.&quot;                                                                                                                        
## [5] &quot;Date PublishedDate Published is in most cases within two weeks of the date that the tablet was received by the lab (MAPS and other non-Ecstasydata results not included).&quot;                         
## [6] &quot;Date TestedDate Tested the approximate date when the sample was tested by the lab.&quot;
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Extract table</h2>
  </hgroup>
  <article>
    <pre><code class="r">pg_table &lt;- pg %&gt;% 
  html_table(fill = T) %&gt;% 
  .[[2]]

name_table &lt;- function(x){
 names(x) &lt;- c(&quot;Photo&quot;, &quot;Name&quot;, &quot;Substance&quot;, &quot;Amounts&quot;, 
               &quot;Date_published&quot;, &quot;Date_tested&quot;, &quot;Location&quot;, 
               &quot;Sample_size&quot;, &quot;Data_source&quot;)
 x %&gt;% tbl_df
}

pg_table &lt;- pg_table %&gt;% 
  name_table %&gt;% 
  tbl_df %&gt;% 
  slice(-1)
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Building cleaning function</h2>
  </hgroup>
  <article>
    <p>As with all scraping project a functional approach works amazing.</p>

<pre><code class="r">clean_table &lt;- function(x){
  # 1) Clean Amounts 
  # 2) Clean Locations 
  # 3) Coerce date

  x %&gt;% 
    slice(-1) %&gt;% 
    select(Name, Substance, Amounts, Date_published, Location, Sample_size) %&gt;% 
    filter(Substance %in% &quot;MDMA&quot;) %&gt;% 
    mutate(Amounts = ifelse(Amounts == &quot;1&quot; , gsub(&quot;^([0-9]+) mg.*&quot;, &quot;\\1&quot;, Sample_size), 
                            gsub(&quot;^([0-9]+).*&quot;, &quot;\\1&quot;, Amounts)), 
           Amounts = as.numeric(Amounts)) %&gt;% 
    filter(!is.na(Amounts)) %&gt;% 
    mutate(Location = gsub(&quot;^(.*), .*&quot;, &quot;\\1&quot;, Location)) %&gt;% 
    mutate(Date_published = lubridate::mdy(Date_published)) %&gt;% 
    select(-Sample_size)
}
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Crawl delay</h2>
  </hgroup>
  <article>
    <p>We are going to build our own crawl-delay function using <code>Sys.sleep</code> and <code>runif</code></p>

<pre><code class="r">nytnyt &lt;- function (periods = c(2,3)){
  tictoc &lt;- runif(1, periods[1], periods[2])
  cat(&quot;Sleeping for &quot;, round(tictoc, 2), &quot;seconds\n&quot;)
  Sys.sleep(tictoc)
}
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Putting all the pieces together</h2>
  </hgroup>
  <article>
    <p>Building the pipeline</p>

<pre><code class="r">starts &lt;- seq(0, 2000, 200)

collect_pg &lt;- function(x){
  read_html(paste0(&quot;https://www.ecstasydata.org/index.php?sort=DatePublishedU+desc&amp;start=&quot;, x ,
                   &quot;&amp;max=200&quot;)) %&gt;% 
  html_table(fill = T) %&gt;% 
  .[[2]]
}

collect_pg(starts[1]) %&gt;% 
  name_table(.) %&gt;% 
  clean_table(.)
</code></pre>

<pre><code>## # A tibble: 65 x 5
##    Name                     Substance Amounts Date_published Location  
##    &lt;chr&gt;                    &lt;chr&gt;       &lt;dbl&gt; &lt;date&gt;         &lt;chr&gt;     
##  1 Rolls Royce              MDMA         139. 2018-06-29     Zurich    
##  2 Grey Duracell            MDMA         250. 2018-06-24     Manchester
##  3 &quot;Vogel\nBird&quot;            MDMA         182. 2018-06-22     Zurich    
##  4 Tesla                    MDMA         194. 2018-06-22     Zurich    
##  5 &quot;Pik Ass\nAce of Spades&quot; MDMA         172. 2018-06-22     Zurich    
##  6 AMG                      MDMA         170. 2018-06-22     Zurich    
##  7 Silver                   MDMA         194. 2018-06-22     Zurich    
##  8 Philipp Plein            MDMA         149. 2018-06-20     Innsbruck 
##  9 &quot;SS\nZwei S&quot;             MDMA         133. 2018-06-20     Innsbruck 
## 10 Dom Pérignon             MDMA         136. 2018-06-20     Vienna    
## # ... with 55 more rows
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="class" id="id" style="background:; background-size:;">
  <hgroup>
    <h2>Putting all the pieces together (Cont.)</h2>
  </hgroup>
  <article>
    <p>A use case for a <code>for</code> loop!</p>

<pre><code class="r">all_pages &lt;- list()
for(i in 1:length(starts)){
  cat(&quot;[&quot;,paste0(Sys.time()), &quot;] Now collecting page &quot;, i, &quot;\n&quot;)

  # Collection
  all_pages[[i]] &lt;- collect_pg(starts[i]) %&gt;% 
    name_table(.) %&gt;% 
    clean_table()

  nytnyt()
}

all_pages %&gt;% reduce(rbind)
</code></pre>
  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
<slide class="segue" id="slide-46" style="background:url(https://media.giphy.com/media/g6dm5eMVxxo2Y/giphy.gif);background-size:cover; background-size:;">
  <hgroup>
    <h2>Where are the best drugs?</h2>
  </hgroup>
  <article>
    
  </article>
</slide>
<slide class="" id="slide-47" style="background:; background-size:;">
  <hgroup>
    <h2>Answering the questions!</h2>
  </hgroup>
  <article>
    <p>Apparently, Europe is not where the strongest drugs are surfacing:</p>

<div style='float:left;width:48%;' class='centered'>
  <pre><code class="r">all_pages %&gt;% 
  group_by(Location) %&gt;% 
  summarise(Strength = mean(Amounts),
            pill_count = n()) %&gt;% 
  arrange(-Strength) %&gt;%
  filter(pill_count &gt; 10) %&gt;% 
  ggplot(., aes(reorder(Location, Strength), Strength, fill = Location)) +
  geom_bar(stat = &quot;Identity&quot;) +
  coord_flip() +
  labs(x = &quot;Location&quot;)
</code></pre>

</div>
<div style='float:right;width:48%;'>
  <p><img src="assets/fig/unnamed-chunk-35-1.png" title="plot of chunk unnamed-chunk-35" alt="plot of chunk unnamed-chunk-35" style="display: block; margin: auto;" /></p>

</div>  
    <footer class = 'logo'>
    	<div style="position: absolute; left: 1000px; top: 50px; z-index:100">
   			 <img src = "assets/img/logo.png" height="60" width="60">
		</div>
    </footer>
  </article>
</slide>
    <slide class="backdrop"></slide>
  </slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='NA'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Links to slides'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='First things first: What will we be doing today'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Topics and outcomes'>
         4
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=5 title='Topics and outcomes'>
         5
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=6 title='Ethics'>
         6
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=7 title='The FAQ of Scraping'>
         7
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=8 title='The rules of the game'>
         8
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=9 title='10 Commandments of the Data Scraper (Cont.)'>
         9
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=10 title='robotstxt'>
         10
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=11 title='Informal arrangements'>
         11
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=12 title='Using Robotstxt'>
         12
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=13 title='What part of the site may I visit?'>
         13
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=14 title='What part of the site may I visit?'>
         14
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=15 title='Path lookup in batch'>
         15
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=16 title='Crawl-delay'>
         16
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=17 title='Then sleep for around 5 - 10 seconds between calls'>
         17
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=18 title='What do I mean by sleeping between calls?'>
         18
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=19 title='rvest'>
         19
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=20 title='Installing rvest'>
         20
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=21 title='DOM who? Learning the jargon'>
         21
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=22 title='NA'>
         22
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=23 title='html_table()'>
         23
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=24 title='html_table()'>
         24
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=25 title='NA'>
         25
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=26 title='html_nodes()'>
         26
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=27 title='Concluding rvest'>
         27
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=28 title='Added Extras'>
         28
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=29 title='html_session()'>
         29
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=30 title='html_session()'>
         30
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=31 title='NA'>
         31
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=32 title='NA'>
         32
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=33 title='html_form()'>
         33
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=34 title='html_form()'>
         34
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=35 title='html_form()'>
         35
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=36 title='Case Study: Investing drugs test'>
         36
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=37 title='Breaking down the URL'>
         37
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=38 title='Lets get started'>
         38
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=39 title='NA'>
         39
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=40 title='Extract table'>
         40
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=41 title='Extract table'>
         41
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=42 title='Building cleaning function'>
         42
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=43 title='Crawl delay'>
         43
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=44 title='Putting all the pieces together'>
         44
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=45 title='Putting all the pieces together (Cont.)'>
         45
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=46 title='Where are the best drugs?'>
         46
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=47 title='Answering the questions!'>
         47
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  <script src="libraries/widgets/quiz/js/jquery.quiz.js"></script>
<script src="libraries/widgets/quiz/js/mustache.min.js"></script>
<script src="libraries/widgets/quiz/js/quiz-app.js"></script>
<script src="libraries/widgets/bootstrap/js/bootstrap.min.js"></script>
<script src="libraries/widgets/bootstrap/js/bootbox.min.js"></script>
<script src="libraries/widgets/interactive/js/ace/js/ace.js"></script>
<script src="libraries/widgets/interactive/js/opencpu-0.5.js"></script>
<script src="libraries/widgets/interactive/js/interactive.js"></script>

  <!-- MathJax: Fall back to local if CDN offline but local image fonts are not supported (saves >100MB) -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <!-- <script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script> -->
  <script>window.MathJax || document.write('<script type="text/x-mathjax-config">MathJax.Hub.Config({"HTML-CSS":{imageFont:null}});<\/script><script src="libraries/widgets/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"><\/script>')
</script>
<script>  
  $(function (){ 
    $("#example").popover(); 
    $("[rel='tooltip']").tooltip(); 
  });  
  </script>  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>